@using Newtonsoft.Json;
@using CED.Contracts.ClassInformations;
@model CED.Contracts.ClassInformations.ClassInformationDto
@using CED.Contracts.Users

@{
    ViewData["Title"] = "Edit";
    List<string> roles = ViewData["Roles"] as List<string> ?? new List<string>();
    List<string> genders = ViewData["Genders"] as List<string> ?? new List<string>();
    List<string> academics = ViewData["AcademicLevels"] as List<string> ?? new List<string>();
    List<string> learningModes = ViewData["LearningModes"] as List<string> ?? new List<string>();
    List<string> statuses = ViewData["Statuses"] as List<string> ?? new List<string>();

    List<SubjectLookupDto>? subjects = (List<SubjectLookupDto>) (ViewData["Subjects"] ?? "");
    List<TutorDto> tutors = ViewData["TutorDtos"] as List<TutorDto> ?? new List<TutorDto>();


}
<h1>Edit</h1>

<div class="alert alert-success alert-dismissible fade collapse" role="alert" id="successAlert">
    <i class="bi bi-check-circle me-1"></i>
    Update successfully!
    <button type="button" class="btn-close" data-bs-toggle="collapse" id="successAlertButton" data-bs-target="#successAlert" aria-expanded="false" aria-controls="successAlert" aria-label="Close"></button>
</div>

<h4>@Model.Title</h4>

<hr />
<div class="card">
    <div class="card-body">
        <h5 class="card-title">About class' information</h5>

        <!-- Multi Columns Form -->
        <form class="row g-3" asp-action="Edit" asp-controller="ClassInformation" onsubmit="return callPostActionWithForm(this);">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="col-md-12">
                <label asp-for="Title" class="form-label">Title</label>
                <input type="text" asp-for="Title" class="form-control"/>
                <span asp-validation-for="Title" class="text-danger"></span>

            </div>
            <!-- ----------------------------------- -->

            <div class="col-md-6">
                <label asp-for="SubjectId" class="form-label">Subject Name</label>
                <select asp-for="SubjectId" class="form-select">
                    <option selected value="@Model.SubjectId">
                        @Model.SubjectName.ToString()
                        <!--  <input type="text" value="@Model.SubjectId" hidden asp-for="SubjectId" class="form-control" />-->
                    </option>

                    @foreach (var i in subjects)
                    {
                        @if (i.Name != Model.SubjectName.ToString())
                        {
                            <option value="@i.Id">
                                @i.Name

                                <!--  <input type="text" value="@i.Id" hidden asp-for="SubjectId" class="form-control" /> -->
                            </option>
                        }
                    }
                </select>
                <span asp-validation-for="SubjectId" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="TutorDtoId" class="form-label">Tutor</label>
                <select asp-for="TutorDtoId" class="form-select">
                    <option selected value="@Model.TutorDtoId">
                        @Model.TutorName
                    </option>

                    @foreach (var i in tutors)
                    {
                        @if (i.Id != Model.TutorDtoId)
                        {
                            <option value="@i.Id">
                                @i.FirstName @i.LastName

                                <!--  <input type="text" value="@i.Id" hidden asp-for="SubjectId" class="form-control" /> -->
                            </option>
                        }
                    }
                </select>
                <span asp-validation-for="SubjectId" class="text-danger"></span>
            </div>
            <!-- ----------------------------------- -->

            <div class="col-md-4">
                <label asp-for="GenderRequirement" class="form-label">Gender Requirement</label>
                <select asp-for="GenderRequirement" class="form-select">
                    <option selected>@Model.GenderRequirement.ToString()</option>

                    @foreach (string i in genders)
                    {
                        @if (i != Model.GenderRequirement.ToString())
                        {
                            <option> @i </option>
                        }
                    }
                </select>
                <span asp-validation-for="GenderRequirement" class="text-danger"></span>
            </div>

            <div class="col-md-4">
                <label asp-for="LearningMode" class="form-label">Learning Mode</label>
                <select asp-for="LearningMode" class="form-select">
                    <option selected>@Model.LearningMode.ToString()</option>

                    @foreach (string i in learningModes)
                    {
                        @if (i != Model.LearningMode.ToString())
                        {
                            <option> @i </option>
                        }
                    }
                </select>
                <span asp-validation-for="LearningMode" class="text-danger"></span>
            </div>
            <div class="col-md-4">
                <label asp-for="AcademicLevel" class="form-label">Academic level requirement</label>
                <select asp-for="AcademicLevel" class="form-select">
                    <option selected>@Model.AcademicLevel.ToString()</option>

                    @foreach (string i in academics)
                    {
                        @if (i != Model.AcademicLevel.ToString())
                        {
                            <option> @i </option>
                        }
                    }
                </select>
                <span asp-validation-for="AcademicLevel" class="text-danger"></span>
            </div>
            <!-- ----------------------------------- -->
            

            <div class="col-md-4">
                <label asp-for="Fee" class="form-label">Fee</label>
                <input type="number" class="form-control" asp-for="Fee" placeholder="0.99"/>
                <span asp-validation-for="Fee" class="text-danger"></span>

            </div>
            <div class="col-md-4">
                <label asp-for="ChargeFee" class="form-label">Charge Fee</label>
                <input type="number" class="form-control" asp-for="ChargeFee" placeholder="0.99" />
                <span asp-validation-for="ChargeFee" class="text-danger"></span>

            </div>
            <div class="col-md-4">
                <label asp-for="Status" class="form-label">Current status</label>
                <select asp-for="Status" class="form-select">
                    <option selected>@Model.Status.ToString()</option>

                    @foreach (string i in statuses)
                    {
                        @if (i != Model.Status.ToString())
                        {
                            <option> @i </option>
                        }
                    }
                </select>
                <span asp-validation-for="Status" class="text-danger"></span>

            </div>
            <!-- ----------------------------------- -->
            <div class="col-12">
                <div class="form-floating">
                    <textarea class="form-control" placeholder="Address" asp-for="Description" style="height: 100px;"></textarea>
                    <label asp-for="Description" class="form-label">Description</label>
                    <span asp-validation-for="Description" class="text-danger"></span>

                </div>
            </div>
            <!-- ----------------------------------- -->
            <!-- student infor -->
            <div class="col-md-3">
                <label asp-for="StudentGender" class="form-label">Student's Gender</label>
                <select asp-for="StudentGender" class="form-select">
                    <option selected>@Model.StudentGender.ToString()</option>

                    @foreach (string i in genders)
                    {
                        @if (i != Model.StudentGender.ToString())
                        {
                            <option> @i </option>
                        }
                    }
                </select>
                <span asp-validation-for="StudentGender" class="text-danger"></span>
            </div>
            <div class="col-md-3">
                <label asp-for="NumberOfStudent" class="form-label">Number Of Student</label>
                <input type="number" class="form-control" asp-for="NumberOfStudent" />
                <span asp-validation-for="NumberOfStudent" class="text-danger"></span>

            </div>
            <div class="col-md-3">
                <label asp-for="MinutePerSession" class="form-label">Minute/Session</label>
                <input type="number" class="form-control" asp-for="MinutePerSession" >
                <span asp-validation-for="MinutePerSession" class="text-danger"></span>

            </div>
            <div class="col-md-3">
                <label asp-for="SessionPerWeek" class="form-label">Session/Week</label>
                <input type="number" class="form-control" asp-for="SessionPerWeek"/>
                <span asp-validation-for="SessionPerWeek" class="text-danger"></span>

            </div>
            <!-- address advanced set up----------------------------------- -->

            <div class="col-12">
                <label asp-for="Address" class="form-label">Address</label>
                <input type="text" class="form-control" asp-for="Address" placeholder="1234 Main St"/>
                <span asp-validation-for="Address" class="text-danger"></span>

            </div>

            <div class="col-md-6">
                <label for="inputCity" class="form-label">City</label>
                <input type="text" class="form-control" id="inputCity"/>
            </div>
            <div class="col-md-4">
                <label for="inputState" class="form-label">State</label>
                <select id="inputState" class="form-select">
                    <option selected>Choose...</option>
                    <option>...</option>
                </select>
            </div>
            <div class="col-md-2">
                <label for="inputZip" class="form-label">Zip</label>
                <input type="text" class="form-control" id="inputZip"/>
            </div>
            <!-- ----------------------------------- -->

            



            <!-- ----------------------------------- hidden info -->

            <div class="form-group" hidden>
                <label asp-for="DeleterUserId" class="control-label"></label>
                <input asp-for="DeleterUserId" class="form-control" />
                <span asp-validation-for="DeleterUserId" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="DeletionTime" class="control-label"></label>
                <input asp-for="DeletionTime" class="form-control" />
                <span asp-validation-for="DeletionTime" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="LastModificationTime" class="control-label"></label>
                <input asp-for="LastModificationTime" class="form-control" />
                <span asp-validation-for="LastModificationTime" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="LastModifierUserId" class="control-label"></label>
                <input asp-for="LastModifierUserId" class="form-control" />
                <span asp-validation-for="LastModifierUserId" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="CreationTime" class="control-label"></label>
                <input asp-for="CreationTime" class="form-control" />
                <span asp-validation-for="CreationTime" class="text-danger"></span>
            </div>
            <div class="form-group" hidden>
                <label asp-for="CreatorUserId" class="control-label"></label>
                <input asp-for="CreatorUserId" class="form-control" />
                <span asp-validation-for="CreatorUserId" class="text-danger"></span>
            </div>
            <input type="hidden" asp-for="Id" />
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Submit</button>
                <a type="reset" asp-action="Index" class="btn btn-secondary">Cancel</a>
            </div>
            @Html.AntiForgeryToken()
        </form><!-- End Multi Columns Form -->

    </div>
</div>



@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

